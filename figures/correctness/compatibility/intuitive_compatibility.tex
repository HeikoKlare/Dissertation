\newcommand{\classdistance}{5.5em}
\newcommand{\objectwidth}{6.9em}

\begin{tikzpicture}[
    correspondence/.style={consistency relation, -}
]

\umlobjectvarwidth[, fill=white]{person1}{}{
: Person\sameheight}{
firstname = "Alice"
lastname = "Avid"
}{\objectwidth}

\umlobjectvarwidth[, fill=white, below right=0.9*\classdistance and 0.3*\objectwidth of person1.north, anchor=north]{person2}{}{
: Person\sameheight}{
firstname = "alice"
lastname = "avid"
}{\objectwidth}

\umlobjectvarwidth[, fill=white, below=2*\classdistance of person1.north, anchor=north] {resident1}{}{
: Resident\sameheight}{
name = "Alice Avid"
}{\objectwidth}

\umlobjectvarwidth[, fill=white, right=0.4*\classdistance+\objectwidth of resident1.north, anchor=north] {resident2}{}{
: Resident\sameheight}{
name = "alice avid"
}{\objectwidth}

\umlobjectvarwidth[, fill=white, right=1.55*\classdistance+\objectwidth of person1.north, anchor=north] {employee1}{}{
: Employee\sameheight}{
name = "Alice Avid"
}{\objectwidth}

\umlobjectvarwidth[, fill=white, below left=0.75*\classdistance and 0.4*\objectwidth of employee1.north, anchor=north]{employee2}{}{
: Employee\sameheight}{
name = "alice avid"
}{\objectwidth}

\draw[correspondence] ([xshift=-0.4*\objectwidth]person1.south) -- ([xshift=-0.4*\objectwidth]resident1.north);
\draw[correspondence] (person1.east|-employee1.west) -- (employee1);
\draw[correspondence] ([xshift=0.3*\objectwidth]employee1.south) |- (resident2);
\draw[correspondence] (resident2) -- (person2);
\draw[correspondence] (person2) -- (employee2);
\draw[correspondence] (employee2) -- (resident2);

\coordinate[right=0.85*\objectwidth of employee2.south east] (legend);
\node[draw, fill=lightlightgray, minimum width=1.15*\objectwidth, minimum height=0.9*\objectwidth, above=0.07*\objectwidth of legend, anchor=north] {};
\draw[correspondence] ($(legend)-(0.2*\objectwidth,0.6em)$) -- ++(0.4*\objectwidth,0);
\node[consistency related element, below=1em of legend, text width=1*\objectwidth, anchor=north, align=center, font=\footnotesize] (correspondence_text) {corresponding elements \\ (not forming a valid witness structure)};
%\node[draw, fit=(legend)(correspondence_text)] {};

\end{tikzpicture}