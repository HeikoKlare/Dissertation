\newcommand{\hdistance}{19em}
\newcommand{\vdistance}{1.5em}
\newcommand{\classwidth}{6em}

\begin{tikzpicture}

% Resident
\umlclassvarwidth{resident}{}{Resident\sameheight}{
name
}{\classwidth}

% Employee
\umlclassvarwidth[, right=\hdistance of resident.north, anchor=north]{employee}{}{Employee\sameheight}{
name
}{\classwidth}

% Location
\umlclassvarwidth[, below=\vdistance of resident.south, anchor=north]{location}{}{Location\sameheight}{
street
}{\classwidth}

% Address
\umlclassvarwidth[, below=\vdistance of employee.south, anchor=north]{address}{}{Address\sameheight}{
street
}{\classwidth}

% CONSISTENCY RELATIONS
\draw[directed consistency relation] ([yshift=1em]resident.east) -- node[pos=0, above right] {$r$} node[pos=0.5, above] {$\consistencyrelation{CR}{1}$} node[pos=1, above left] {$e$} ([yshift=1em]employee.west);
\draw[directed consistency relation, Circle-, shorten <= -.2em] ([yshift=1em]$(employee.west)!0.8!(employee.west-|resident.east)$) |- node[pos=1, above right] {$l$} (location.east);
\draw[directed consistency relation 2] ([yshift=-1em]resident.east) -- node[pos=0, above right] {$r$} node[pos=0.5, below] {$\consistencyrelation{CR}{2}$} node[pos=1, above left] {$e$} ([yshift=-1em]employee.west);
\draw[directed consistency relation 2, Circle-Latex, shorten <= -.2em] ([yshift=-1em]$(employee.west)!0.2!(employee.west-|resident.east)$) |- node[pos=1, above left] {$a$} (address.west);

\node[consistency related element, below=1em of location.south west, anchor=north west, inner sep=0em] (relation1) {
$\begin{aligned}
    \consistencyrelation{CR}{1} =\; & \setted{\tupled{(r,l),e} \mid \mathvariable{r.name}  \neq \textnormal{\enquote{}} \\
    &\land (\mathvariable{r.name} = \mathvariable{e.name} \lor \mathvariable{r.name} = \mathvariable{e.name.toLower})} \\[0.3em]
    \consistencyrelation{CR}{2} =\; & \setted{\tupled{r,(e,a)} \mid \mathvariable{r.name} = \mathvariable{e.name} \land \mathvariable{a.street} \neq \textnormal{\enquote{}}}
\end{aligned}$
};

\end{tikzpicture}