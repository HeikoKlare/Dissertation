\newcommand{\mmdistance}{5em}

\begin{tikzpicture}[
    mm/.style={draw, circle, fill=lightgray, inner sep=0.25em},
]

% graph

\node[mm] (graph_middle) {$\metamodel{M}{1}$};
\node[mm, below left=0.5*\mmdistance and sqrt(3)/2*\mmdistance of graph_middle.center, anchor=center] (graph_bottomleft) {$\metamodel{M}{2}$};
\node[mm, below right=0.5*\mmdistance and sqrt(3)/2*\mmdistance of graph_middle.center, anchor=center] (graph_bottomright) {$\metamodel{M}{3}$};

\draw[consistency relation] (graph_middle) -- node[pos=0.4, above left] {\mylabel{fig:correctness:independent_relations:R1}{$\consistencyrelation{R}{1}$}} (graph_bottomleft);
\draw[consistency relation] (graph_middle) -- node[pos=0.4, above right] {\mylabel{fig:correctness:independent_relations:R2}{$\consistencyrelation{R}{2}$}} (graph_bottomright);
\draw[consistency relation] (graph_bottomleft) -- node[below] {\mylabel{fig:correctness:independent_relations:R3}{$\consistencyrelation{R}{3}$} = \mylabel{fig:correctness:independent_relations:R4}{$\consistencyrelation{R}{4}$} $\cup$ \mylabel{fig:correctness:independent_relations:R5}{$\consistencyrelation{R}{5}$}} (graph_bottomright);

\node[below right=0.4*\mmdistance and \mmdistance of graph_bottomleft.center, anchor=north, align=center] 
{ 
$\consistencyrelation{R}{5} \cap (\consistencyrelation{R}{1} \concat \consistencyrelation{R}{2}) = \emptyset$\\
$\consistencyrelation{R}{5} \cap \consistencyrelation{R}{4} = \emptyset$\\[0.3em]
$\consistencyrelation{R}{1} \concat \consistencyrelation{R}{2} \subseteq \consistencyrelation{R}{4}$ %(R_1 \cup R_2)^*\setminus (R_1 \cup R_2)$\\
};


% trees

\node[mm, right=2.5*\mmdistance of graph_middle] (tree1_middle) {$\metamodel{M}{1}$};
\node[mm, below left=0.5*\mmdistance and sqrt(3)/2*\mmdistance of tree1_middle.center, anchor=center] (tree1_bottomleft) {$\metamodel{M}{2}$};
\node[mm, below right=0.5*\mmdistance and sqrt(3)/2*\mmdistance of tree1_middle.center, anchor=center] (tree1_bottomright) {$\metamodel{M}{3}$};

\draw[consistency relation] (tree1_middle) -- node[pos=0.4, above left] {$\consistencyrelation{R}{1}$} (tree1_bottomleft);
\draw[consistency relation] (tree1_middle) -- node[pos=0.4, above right] {$\consistencyrelation{R}{2}$} (tree1_bottomright);


\node[mm, below=0.9*\mmdistance of tree1_middle.center, anchor=center] (tree2_middle) {$\metamodel{M}{1}$};
\node[mm, below left=0.5*\mmdistance and sqrt(3)/2*\mmdistance of tree2_middle.center, anchor=center] (tree2_bottomleft) {$\metamodel{M}{2}$};
\node[mm, below right=0.5*\mmdistance and sqrt(3)/2*\mmdistance of tree2_middle.center, anchor=center] (tree2_bottomright) {$\metamodel{M}{3}$};

\draw[consistency relation] (tree2_bottomleft) -- node[below] {$\consistencyrelation{R}{5}$} (tree2_bottomright);


% combinators

\node[above=0.4*\mmdistance of tree2_middle.center, anchor=center] {\Large\textbf{+}};

\draw[-latex] ([xshift=0.2*\mmdistance]graph_bottomright.east) --
    ([xshift=-0.2*\mmdistance]tree1_bottomleft.west);


\end{tikzpicture}