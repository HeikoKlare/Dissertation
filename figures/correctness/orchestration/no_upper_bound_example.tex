\newcommand{\distance}{13.8em}
\newcommand{\classwidth}{2em}

\begin{tikzpicture}

\umlclassvarwidth{A}{}{A}{
n
}{\classwidth}
\umlclassvarwidth[, right=\distance of A.north, anchor=north]{B}{}{B}{
n
}{\classwidth}
\umlclassvarwidth[, right=\distance of B.north, anchor=north]{C}{}{C}{
n
}{\classwidth}

\draw[consistency relation]
    ([yshift=0.7em]A.east)
    --
    node[pos=0, below right] {$a$}
    node[pos=1, below left] {$b$}
    node[above, align=center] {$\consistencyrelation{CR}{AB} = \{\tupled{a,b} \mid a.n, b.n \geq 0$ \\ 
        $\land \; b.n = a.n + 1 \land b.n \neq x\}$}
    ([yshift=0.7em]B.west);
\draw[consistency relation]
    ([xshift=0.7em]A.south)
    --
    node[pos=0, below left] {$a$}
    ++(0,-0.4*\distance)
    -|
    node[pos=1, below right] {$c$}
    node[above, pos=0.25] {$\consistencyrelation{CR}{AC} = \setted{\tupled{a,c} \mid a.n = c.n}$}
    ([xshift=-0.7em]C.south);
\draw[consistency relation]
    ([yshift=0.7em]B.east)
    --
    node[pos=0, below right] {$b$}
    node[pos=1, below left] {$c$}
    node[above, align=center] {$\consistencyrelation{CR}{BC} = \setted{\tupled{b,c} \mid b.n = c.n}$}
    ([yshift=0.7em]C.west);


\draw[transformation]
    ([yshift=-0.7em]A.east)
    --
    node[below, align=left] {$+a \xrightarrow{a.n \;\neq \; x-1} +b(n = a.n + 1)$\\
        $+b \xrightarrow{b.n \; \neq \; x} +a(n = b.n - 1)$}
    ([yshift=-0.7em]B.west);
\draw[transformation]
    ([xshift=-0.7em]A.south)
    --
    ++(0,-0.4*\distance-1.4em)
    -|
    node[below, pos=0.25, align=left] {$+a \rightarrow +c(n = a.n)$\\
        $+c \rightarrow +a(n = c.n)$}
    ([xshift=0.7em]C.south);
\draw[transformation]
    ([yshift=-0.7em]B.east)
    --
    node[below, align=left] {$+b \rightarrow +c (n = b.n)$\\
        $+c \rightarrow +b (n = c.n)$}
    ([yshift=-0.7em]C.west);

\end{tikzpicture}