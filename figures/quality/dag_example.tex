\newcommand{\vdistance}{4.8em}
\newcommand{\hdistance}{10.9em}
\newcommand{\mmwidth}{8.5em}
\newcommand{\mmheight}{3em}

\begin{tikzpicture}[
    mm/.style={draw, mmbg, minimum width=\mmwidth, minimum height=\mmheight, inner sep=0em}, %, font=\itshape},
    conceptmm/.style={mm, conceptmmbg},
]

% Metamodels

\node[mm] (java) {Java};
\node[mm, draw=gray!70, minimum height=0.5*\mmheight, right=\hdistance of java.south, anchor=south] (uml) {UML};
\node[mm, draw=gray!70, minimum width=0.5*\mmwidth, minimum height=0.5*\mmheight, above=0.5*\mmheight of uml.west, anchor=west] (uml_class) {\emph{Class}};
\node[mm, draw=gray!70, minimum width=0.5*\mmwidth, minimum height=0.5*\mmheight, above=0.5*\mmheight of uml.east, anchor=east] (uml_component) {\emph{Comp}};
\node[mm, fill=none, right=\hdistance of java.north, anchor=north] {}; % Redraw thick border of UML
\node[conceptmm, above right=\vdistance and 0.5*\hdistance of java.north, anchor=north, align=center] (oo) {Object-oriented\\ Design};
\node[mm, right=\hdistance of oo.north, anchor=north] (pcm) {PCM};
\node[conceptmm, above right=\vdistance and 0.5*\hdistance of oo.north, anchor=north, align=center] (component) {Component-based\\ Design};


% CONSISTENCY RELATIONS

\draw[consistencyrel, <-] (java) -- (oo);
\draw[consistencyrel, <-] (uml_class) -- (oo);
\draw[consistencyrel, <-] (oo) -- (component);
\draw[consistencyrel, <-] ([xshift=-0.15*\mmwidth]uml_component.north) -- (component);
\draw[consistencyrel, <-] (pcm) -- (component);


\end{tikzpicture}
