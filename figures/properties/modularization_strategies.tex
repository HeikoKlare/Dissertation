\newcommand{\hmmdistance}{3em}
\newcommand{\vmmdistance}{2em}

\begin{tikzpicture}[
    mm/.style={draw, circle, fill=gray},
    consistency relation/.style={latex-latex,consistency related element},
    mininode/.style={inner sep=.25em}, 
    legend/.style={font=\small}
]

% fully connected graph

\node[mm] (full_left) {};
\node[mm, above right=\vmmdistance and \hmmdistance of full_left.center, anchor=center] (full_top) {};
\node[mm, below right=\vmmdistance and \hmmdistance of full_left.center, anchor=center] (full_bottom) {};
\node[mm, right=2*\hmmdistance of full_left.center, anchor=center] (full_right) {};
\node[mm, below left=\vmmdistance and \hmmdistance of full_left.center, anchor=center] (full_bottomleft) {};

\draw[consistency relation] (full_left) -- (full_top);
\draw[consistency relation] (full_left) -- (full_right);
\draw[consistency relation] (full_left) -- (full_bottom);
\draw[consistency relation] (full_top) -- (full_right);
\draw[consistency relation] (full_top) -- (full_bottom);
%\draw[consistency relation] (full_top) to[bend left=50] ([xshift=1em]full_right) to [bend left=50] (full_bottom);
\draw[consistency relation] (full_right) -- (full_bottom);
\draw[consistency relation] (full_left) -- (full_bottomleft);
\draw[consistency relation] (full_bottom) -- (full_bottomleft);
\draw[consistency relation] (full_top) to[bend right=30] (full_bottomleft);
\draw[consistency relation] (full_bottomleft) .. controls ++(7em, -1em) and ([yshift=-3em, xshift=-0.2em]full_right.south) .. (full_right);
%\draw[consistency relation] (full_bottomleft) to[bend right=35] ([xshift=0.6*\mmdistance]full_bottom) to[bend right=20] (full_right);


%\node[below left=0.4*\vmmdistance and 0.5*\hmmdistance of full_bottom.south, anchor=north] {(a)};


% tree graph

\node[mm, right=4*\hmmdistance of full_left.center, anchor=center] (tree_left) {};
\node[mm, above right=\vmmdistance and \hmmdistance of tree_left.center, anchor=center] (tree_top) {};
\node[mm, below right=\vmmdistance and \hmmdistance of tree_left.center, anchor=center] (tree_bottom) {};
\node[mm, right=2*\hmmdistance of tree_left.center, anchor=center] (tree_right) {};
\node[mm, below left=\vmmdistance and \hmmdistance of tree_left.center, anchor=center] (tree_bottomleft) {};

\draw[consistency relation] (tree_left) -- (tree_top);
\draw[consistency relation] (tree_left) -- (tree_bottom);
\draw[consistency relation] (tree_left) -- (tree_bottomleft);
\draw[consistency relation] (tree_top) -- (tree_right);

%\node[below left=0.4*\vmmdistance and 0.5*\hmmdistance of tree_bottom.south, anchor=north] {(b)};

\node[draw=darkgray, matrix, legend, nodes=mininode, below right=0em and 2*\hmmdistance of tree_top, anchor=north west, outer sep=0, inner sep=0.4em, column sep=0.4em, row sep=0.2em] (legend) {
    \node[mm, anchor=center] (legend_mm) {}; &
    \node[anchor=west] (legend_mm_text) {model type}; \\
    %
    \draw[consistency relation] (-0.7em,0) -- (0.7em,0); &
    \node[anchor=west, align=left] {consistency\\ specification}; \\
};

% \node[mm, below right=0.5em and 2.5*\hmmdistance of tree_top] (legend_mm) {};
% \node[right=0.2em of legend_mm] (legend_mm_text) {\smallerfont model type};
% \draw[consistency relation] ([yshift=-2em, xshift=-0.7em]legend_mm.center) -- ([yshift=-2em, xshift=0.7em]legend_mm.center);
% \node[below=2em of legend_mm_text.north west, anchor=north west, align=left] {\smallerfont consistency\\ \smallerfont specification};

\end{tikzpicture}