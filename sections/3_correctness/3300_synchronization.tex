\chapter{Constructing Synchronizing Transformations
   \pgsize{20 p.}
}
\label{chap:synchronization}

\todo{Vermeidbarkeit h√§ngt insb. auch von der verwendeten Sprache ab. Z.B. sind Mappings / QVT-R analysierbar, aber Reactions / QVT-O nicht.}

\todo{Ergebnis sollte sein: Synchronisierungseigenschaft ist erreichbar per Konstruktuion}

\mnote{Transformation correctness can be achieved by adhering to the definition}
Transformations are the central artifacts of which a transformation network is composed.
We have introduced them as \emph{synchronizing transformations} in \autoref{def:synchronizingtransformation}, which are combinations of a consistency relation together with a consistency preservation rules that preserves it.
Correctness of such a transformation could then be defined as the property of the consistency preservation rule to preserve consistency of given models according to the consistency relation (cf.\ \autoref{def:synchronizingtransformationcorrectness}).
In theory, a correct transformation can simply be achieved by adhering to that definition.

%Even if we consider that one may only define a consistency preservation rule, which then induces the consistency relation as its image, thus being correct by construction, the rule may not behave as expected.

% Problem statement: Problem is a practical one, not a theoretical one.
% Ordinary transformations may be correct if used on their own (according to Stevens), but in context of a transformation network, when other transformation have modified the "target" model as well, they do not lead to a consistent result anymore, i.e., they are not correct.
% Start with example of duplicated creation and overwrite.

\mnote{Transformation languages base on unidirectional consistency preservation rules}
Using existing transformation languages, the defined transformations will, however, not follow the definition of a synchronizing transformation.
Transformation languages usually allow the specification of unidirectional consistency preservation rules, i.e., rules that restore consistency by updating one model if the other was modified.
Even if transformation languages allow bidirectional specifications, they still derive unidirectional consistency preservation rules from such a specification, such as forward and backward transformation (which may be incremental or not) derived from \glspl{TGG} rules~\cite{leblebici2014IncrementalTGGSurvey-GTVMT}.
In the following, we refer to such transformations as \emph{ordinary transformations} and give a more precise definition of them later on.
Synchronizing transformation, as we assume in transformation networks, are able to process changes made in both models and, in turn, also produce changes for both models.
This is an inevitable property in transformation networks, because both models involved in a transformation may have been modified due to different sequences of transformations having modified both of them.

\mnote{We want to find requirements to ordinary transformations to be used as synchronizing ones}
In this chapter, we aim to close this gap between synchronizing transformations as required in transformation networks and ordinary transformations with unidirectional consistency preservation rules used by transformation languages.
We investigate which requirements such an ordinary transformation has to fulfill to emulate a synchronizing transformation and thus be used in a transformation network.
This chapter thus constitutes our contribution \contributionref{contrib:correctness:synchronization}, which consists of three subordinate contributions: a discussion of the formal basis for the gap between synchronizing and ordinary transformations, a case distinction for synchronization scenarios in ordinary transformations, and finally techniques to build synchronizing transformations by ordinary ones.
\todo{Finally update goals}
It answers the following research question:

\researchquestionrepeat{rq:correctness:synchronization}

\mnote{Making ordinary transformations synchronizing enables reuse of languages and knowledge}
The benefit of enabling the definition of ordinary transformations that can be used a synchronizing ones instead of providing an approach or language for the specification of synchronizing transformations is that existing and well-researched transformation languages and knowledge about them can be reused.
Additionally, it reduces the complexity, because the definition of two unidirectional consistency preservation rules is less cumbersome than the definition of a single synchronizing transformation, which has to consider all possible combinations of changes in two models.
We will see that this is founded by the insight that only few combinations of changes are problematic and have to be explicitly considered.


\input{sections/3_correctness/3310_synchronization-gap.tex}
\input{sections/3_correctness/3320_synchronization-combination.tex}
\input{sections/3_correctness/3330_synchronization-bidirectional.tex}
\input{sections/3_correctness/3340_synchronization-patterns.tex}
\input{sections/3_correctness/3350_synchronization-summary.tex}