\chapter{Classifying Errors in Transformation Networks 
    \pgsize{20 p.}
}
\label{chap:errors}

\mnote{Discuss error as the result of failing in achieving correctness}
In the previous chapters, we have introduced a notion of correctness for transformation networks and discussed how we can achieve or analyze different kinds of correctness for the different artifacts of the transformation network, namely the consistency relations, the consistency preservation rules and the application function.
It may, however, easily occur that a transformation developer defines transformations that do not adhere to all these kinds of correctness, be it because of missing knowledge about them or by accident.

\mnote{Proposal for specification levels and categorization of errors}
In this chapter, we thus discuss what may happen if correctness was not achieved.
The possible types of errors that can occur depend on the abstraction level at which the specification is performed. 
This depends on the existing knowledge, i.e., whether the transformation is to be used in a transformation network, or even in which network it is to be used, but also on the abstraction provided by the formalism or language to specify a transformation or transformation network, respectively, in.
We thus first propose a distinction of such specification levels for transformation networks.
We then systematically derive a categorization of potential \emph{failures}, i.e., the unwanted results the application algorithm may yield, the \emph{faults} that led to the mistakes, i.e., the errors in the implementation of the transformation, and finally the causing \emph{mistakes}, i.e., the errors made by a developer due to his knowledge that led to an implementation fault.
Finally, we discuss how the possible types of mistakes, faults and failures can be detected or avoided and how this relates to the correctness notions and approaches to achieve them that we have introduced so far.

\mnote{Subordinate contributions}
This chapter thus constitutes our contribution \contributionref{contrib:correctness:errors}, which consists of three subordinate contributions: a separation of knowledge-dependent specification levels for transformation network, a categorization of potential errors in transformation networks, and a discussion of the possibilities to detect and avoid errors with respect to the yet discussed correctness notions and measures to achieve them.
\todo{Finally update goals}
It answers the following research question:

\researchquestionrepeat{rq:correctness:errors}

\mnote{Benefits of contributions}
As the central goal of this chapter, we categorize the possible types of errors to derive systematic knowledge about mistakes that can be made and failures that can arise from them.
First, this helps transformations developers to identify the reasons for arising failures.
Second, it allows us to identify which relevant errors we can avoid or detect with the approaches proposed in the previous chapters and how relevant the problems that we solve with them are.
The latter will be part of our subsequent evaluation at a case study.

\mnote{Publication of results}
Several of the insights regarding errors in transformation networks are results of the two master's theses by \textcite{syma2018ma} and \textcite{saglam2020ma}, who investigated errors that occurred when combining independently developed transformations in two case studies.
Essential results from the former thesis were published in \owncite{klare2019icmt} and are part of the following discussion in revised form.

%Problem statement: We now know what correctness means and how to constructively achieve or at least analyze it. We, however, want to know what may happen if correctness was not achieved by any reason.
%We want to have systematic knowledge what kinds of problems can occur, what types of reasons there are and how they manifest.
%We want to derive how many of the typical problems we can systematically resolve with our contributions, i.e., how relevant the problems that we solve are (how often they occur).

% \todo{Unterschied Klassifizierung/Kategorisierung: Klassifizierung benötigt Klassifizierungsdimension, Kategorisierung nicht}
% Klassifizierung: Wir packen Spezifikationsszenarien in vordefinierte Klassen, entsprechend ihrem Abstraktionsgrad
% Kategorisierung: Wir identifizieren Kategorien von Mistakes/Faults/Failures und diskutieren deren Vollständigkeit
% Im Unterschied sind bei der Kategorisierung die Kategorien vorher nicht bekannt.
% RESULTAT: Nicht nötig, wir machen nur Kategorisierung

%\todo{Ziel dieses Kapitels: Wie hängen Korrektheitsdefinition voneinander ab (Hierarchie/Ebenen), was passiert, wenn einzelne Korrektheiten nicht erfüllt sind? Welche Fehler treten auf? Und wie häufig passiert das? (Letzteres eher als Evaluation verkaufen)}

\todoLater{Discuss errors by two unidirectional transformations not adhering to the same consistency relation, which we already teasered in \autoref{chap:synchronization} and have seen in the case study. What is meant by that? It there really a teaser in that chapter?}

\input{sections/3_correctness/3510_errors-levels.tex}
\input{sections/3_correctness/3520_errors-categorization.tex}
\input{sections/3_correctness/3530_errors-avoidance.tex}


\section{Summary}

In this chapter, we have discussed the separation of the transformation network specification process into three different levels, we have categorized the possible mistakes, faults and failures that can occur in such a network and discussed which of them can be avoided or detected.

%Fitting that transformation level can be avoided by construction, other level are handled by conservative algorithm.

%\todo{Maybe discuss replacement of algorithm with less-restrictive one as in failures section and problem of consistency check by transformation execution again or here instead}

\begin{insight}[Errors]
    Errors in transformation networks can be classified regarding mistakes made by the transformation developers when thinking about consistency and its preservation, faults made during their implementation in terms of transformations, and failures, which are the manifestation of faults when executing the transformations.
    We found that we can assign different kinds of mistakes to three different conceptual levels in the specification process, depending on the necessary knowledge about the transformation network.
    We were able to derive that mistakes regarding a single transformation cover the missing synchronization, which can and has to be avoided by construction.
    This is especially necessary if transformations assume consistency to be achieved by construction, because then non-synchronizing transformations produce faulty results that they assume to be consistent, because they have generated them.
    All other types of mistakes concern the network of transformations, either restricted to the relations or also concerning the consistency preservation rules.
    While consistency relations can at least be analyzed for compatibility, further mistakes cannot be avoided but only be detected by the application algorithm failing in specific scenarios.
    Due to the assumption of independent transformation development and reuse, it fits well that a conservative application algorithm is necessary anyway and also covers mistakes concerned with the network of transformations.
    Only if the transformation network fails in many cases, because of non-fitting transformations, such as having incompatible consistency relations, the transformation developers need to investigate the reasons for algorithm to fail.
\end{insight}