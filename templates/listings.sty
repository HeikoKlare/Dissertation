\RequirePackage[final]{listings}

\colorlet{stringblue}{kit-blue100}
\colorlet{commentgreen}{kit-green70}
\colorlet{keywordgreen}{kit-green100}
\colorlet{keywordblue}{kit-blue100}
\definecolor{keywordred}{rgb}{0.7,0,0.5}

\lstset{
    flexiblecolumns=true,
    basicstyle=\small\ttfamily,
    captionpos=b,
    % numberbychapter=false,
    numbers=left,
    numberstyle=\footnotesize\color{darkgray},
    numbersep=5pt,
    % mathescape=true,
    escapechar=ยง,
    commentstyle=\ttfamily\color{commentgreen},            % type writer font for comments
    stringstyle=\color{stringblue},%\rmfamily,             % normal font for strings
    %   showstringspaces=true,             % shows blanks in strings
    %   breaklines=true,                   % allows breaking of lines
    %   frameround=ffff,                   % see manual
    frame=lines,
    backgroundcolor=\color{lightlightgray},
    rulecolor=\color{darkgray},
    tabsize=3,        % see manual
}

\lstdefinelanguage{commonalities}
{
    backgroundcolor=\color{lightgray!30},
    %frame=single,
    %basicstyle=\small\ttfamily,
    keywords=[1]{concept, commonality, with, has, referencing, single},
    keywords=[2]{prefix, hasSuffix, in, compose, firstUpper},
    keywordstyle=[1]\bfseries,
    keywordstyle=[2]\itshape,
    %framesep=0.5em,
    %xleftmargin=0.5em,
    %xrightmargin=0.5em,
}

\lstdefinelanguage{QVT}{
  morekeywords={
    % relations:  
    checkonly, domain, enforce, extends, implementedby, import, 
    key, overrides, primitive, query, relation, top, 
    transformation, when, where
    % operational: 
    Bag, Collection, Dict, OrderedSet, Sequence, Set, Tuple, abstract, 
    access, and, any, assert, blackbox, break, case, class, collect, 
    collectNested, collectOne, collectselect, collectselectOne, 
    composes, compute, configuration, constructor, continue, datatype, 
    default, derived, disjuncts, do, elif, else, end, endif, 
    enum, except, exists, extends, exception, false, forAll, forEach , 
    forOne, from, helper, if, implies, import , in, inherits, init, 
    inout, intermediate, invresolve, invresolveIn, invresolveone, 
    invresolveoneIn , isUnique, iterate, late, let, library, literal, 
    log, main, map, mapping, merges, metamodel, modeltype, new, not, 
    null, object, one, or, ordered, out, package, population, primitive, property, 
    query, raise, readonly, references, refines, reject, resolve, resolveIn, resolveone, 
    resolveoneIn, return, select, selectOne, sortedBy, static, 
    switch, tag, then, transformation, true, try, typedef, unlimited, 
    uses, var, when, where, while, with, xcollect , xmap, xor, xselect 
  },
  keywordstyle=\color{kit-green100}\textbf,
  keywordstyle=[2]{\textit}, % \textcolor{kit-green100}{\textbf}},
  morecomment=[l]{--},
  morestring=[b]{'},
  %numbers=left,
  %stepnumber=1,
  %basicstyle=\ttfamily,
  %stringstyle=\color{kit-blue100},
  %tabsize=4
}

\lstdefinelanguage{framedQVT}{
  language=QVT,
  frame=single,
  numbers=none
}

% https://tex.stackexchange.com/questions/27653/how-to-emphasize-within-a-listing-two-successive-identifiers-separated-by-a-spac
\lstdefinelanguage{reactions}{%
  alsolanguage=Java,
  keywords={import,reactions,%in,reaction,to,changes,in,execute,actions,in % WORKAROUND MANUAL TEXTCOLOR
  },
  keywordstyle=\color{keywordgreen}\bfseries,
  keywords=[2]{reaction,after,before,call,routine,match,action,::,val,retrieve,optional,require,absence,of,corresponding,to,tagged,tag,with,with,check,create,and,initialize,update,delete,add,remove,correspondence,between,and,execute,return,as,instanceof},
  keywordstyle=[2]\color{keywordblue}\bfseries,
  keywords=[3]{%any,change, % DEACTIVATED TO AVOID COLORING OF change HAS TO BE COLOURED MANUALLY
  value,replaced,for,list,permuted,entry,created,and,deleted,and,inserted,in,removed,from,root,element,created,deleted},
  keywordstyle=[3]\color{keywordred}\bfseries,
  keywords=[4]{
  affectedObject, newValue, oldValue, affectedFeature},
  keywordstyle=[4]\color{keywordgreen}
}