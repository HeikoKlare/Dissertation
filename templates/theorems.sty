% Theorems and Numbering
\let\proof\relax
\let\endproof\relax
\let\openbox\relax

\usepackage{amsthm}
\usepackage[framemethod=tikz]{mdframed}
\usepackage{aliascnt} % To share counters between theorems, corollaries etc. with correct autoref
\newtheoremstyle{breakdefinition}% name
  {}%         Space above, empty = `usual value'
  {}%         Space below
  {}% Body font
  {}%         Indent amount (empty = no indent, \parindent = para indent)
  {\bfseries}% Thm head font
  {\vspace{0.5em}}%        Punctuation after thm head
  {\newline}% Space after thm head: \newline = linebreak
  {}%         Thm head spec
\newtheoremstyle{researchgoal}% name
  {}%         Space above, empty = `usual value'
  {}%         Space below
  {}% Body font
  {}%         Indent amount (empty = no indent, \parindent = para indent)
  {\bfseries}% Thm head font
  {\vspace{0.5em}}%        Punctuation after thm head
  {\newline}% Space after thm head: \newline = linebreak
  {Research Goal}%         Thm head spec
\newtheoremstyle{breaktheorems}% name
  {}%         Space above, empty = `usual value'
  {}%         Space below
  {\itshape}% Body font
  {}%         Indent amount (empty = no indent, \parindent = para indent)
  {\bfseries}% Thm head font
  {}%        Punctuation after thm head
  {\newline}% Space after thm head: \newline = linebreak
  {}%         Thm head spec

\theoremstyle{breakdefinition} % Definitions, insights, problem statements and research goal in boxes and with linebreak after title
\newmdtheoremenv[
    innertopmargin=0pt,
    backgroundcolor=gray!10,
    linecolor=black,
    roundcorner=5pt,
    linewidth=1pt,
    nobreak=true
  ]{definition}{Definition}[chapter]
\newcommand{\definitionautorefname}{Definition}
\newmdtheoremenv[
    innertopmargin=0pt,
    backgroundcolor=gray!10,
    linecolor=black,
    roundcorner=5pt,
    linewidth=1pt,
    nobreak=true
  ]{insight}{Insight}
\providecommand*{\insightautorefname}{Insight}
\newmdtheoremenv[
    innertopmargin=0pt,
    backgroundcolor=gray!10,
    linecolor=black,
    roundcorner=5pt,
    linewidth=1pt,
    nobreak=true
  ]{problemstatement}{Problem Statement}
\providecommand*{\problemstatementautorefname}{Problem Statement}
\theoremstyle{researchgoal} % Equal to breakdefinition but unnumbered and with fixed "Research Goal" header"
\newmdtheoremenv[
    innertopmargin=0pt,
    backgroundcolor=gray!10,
    linecolor=black,
    roundcorner=5pt,
    linewidth=1pt,
    nobreak=true
  ]{researchgoal}{Research Goal}
\providecommand*{\researchgoalautorefname}{Research Goal}
\theoremstyle{definition} % Remark not boxed and without linebreak after title
\newtheorem*{remark}{Remark}

\theoremstyle{plain} % Examples without linebreak after title
\newtheorem{example}{Example}[chapter]
% All kinds of theorems in  boxes and with linebreak after title
\theoremstyle{breaktheorems}
\newmdtheoremenv[
    innertopmargin=0pt,
    backgroundcolor=gray!10,
    linecolor=black,
    roundcorner=5pt,
    linewidth=1pt,
    nobreak=true
  ]{theorem}{Theorem}[chapter]
\newaliascnt{lemma}{theorem}
\newmdtheoremenv[
    innertopmargin=0pt,
    backgroundcolor=gray!10,
    linecolor=black,
    roundcorner=5pt,
    linewidth=1pt,
    nobreak=true
  ]{lemma}[lemma]{Lemma}
\aliascntresetthe{lemma}
\providecommand*{\lemmaautorefname}{Lemma}
\newaliascnt{claim}{theorem}
\newmdtheoremenv[
    innertopmargin=0pt,
    backgroundcolor=gray!10,
    linecolor=black,
    roundcorner=5pt,
    linewidth=1pt,
    nobreak=true
  ]{claim}[claim]{Claim}
\aliascntresetthe{claim}
\providecommand*{\claimautorefname}{Claim}
\newaliascnt{proposition}{theorem}
\newmdtheoremenv[
    innertopmargin=0pt,
    backgroundcolor=gray!10,
    linecolor=black,
    roundcorner=5pt,
    linewidth=1pt,
    nobreak=true
  ]{proposition}[proposition]{Proposition}
\aliascntresetthe{proposition}
\providecommand*{\propositionautorefname}{Proposition}
\newaliascnt{corollary}{theorem}
\newmdtheoremenv[
    innertopmargin=0pt,
    backgroundcolor=gray!10,
    linecolor=black,
    roundcorner=5pt,
    linewidth=1pt,
    nobreak=true
  ]{corollary}[corollary]{Corollary}
\aliascntresetthe{corollary}
\providecommand*{\corollaryautorefname}{Corollary}

% Counter for equations
\counterwithin*{equation}{subsection}
